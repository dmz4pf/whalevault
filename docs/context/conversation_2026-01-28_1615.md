# Context Snapshot - Private Swap Debug Session
**Date:** 2026-01-28 16:15

## Current Problem
Private swap on devnet fails with 500 Internal Server Error on `/api/relay/unshield`

## Flow Analysis
1. ✅ Secret derivation works
2. ✅ Proof request (POST /api/unshield/proof) - seems to work
3. ❌ Relay unshield (POST /api/relay/unshield) - 500 error

## What We've Tried
- Added wrapSol/unwrapSol to Raydium API (didn't help - error is BEFORE Raydium)
- Restarted backend with logging
- Verified relayer has balance (0.98 SOL)

## Key Files
- Frontend: `hooks/usePrivateSwap.ts` - swap flow
- Frontend: `services/raydium-swap.ts` - Raydium API
- Backend: `api/routes/relay.py` - relay endpoint
- Backend: `services/relayer_service.py` - transaction submission
- Backend: `veil/solana_client.py` - Solana interactions

## Next Steps
- Check /tmp/backend.log for actual error
- Deep debug the entire flow
- Verify proof generation is working correctly
- Check if the on-chain program call is correct
